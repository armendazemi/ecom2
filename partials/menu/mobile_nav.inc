<top-element>
  <modal-component
    aria-labeledby="main-menu-title"
    id="main-menu">
    <div class="main-menu--mobile padding-y-300 padding-x-150 padding-x-sm d-flex flex-column row-gap-lg">
      <h2 id="main-menu-title" class="visually-hidden">
        {{ "Menu" | t }}
      </h2>

      <nav>
        <ul role="menu" class="list-unstyled p-0 m-0">
          <accordion-group class="d-flex flex-column w-100">
            <!--- Product groups -->

            {% for menuGrp in lists.menu-configurator.rows %}
              {% assign parentGroup = menuGrp.main_group[0] %}
              {% assign layout = menuGrp.layout.type %}


              {% if menuGrp.has_dropdown %}
                <li role="none">
                  <accordion-component>
                    <button type="button" role="menuitem"
                            class="nav-button all-caps justify-content-between w-100 margin-bottom-50">
                      <span>{{ parentGroup.name }}</span>
                      <svg class="rotate" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                           fill="none">
                        <path
                          d="M11.9998 14.677C11.8793 14.677 11.7671 14.6578 11.6633 14.6193C11.5594 14.5808 11.4607 14.5148 11.367 14.4213L6.87276 9.92701C6.73442 9.78851 6.66359 9.61443 6.66026 9.40476C6.65709 9.19526 6.72792 9.01801 6.87276 8.87301C7.01776 8.72818 7.19342 8.65576 7.39976 8.65576C7.60609 8.65576 7.78176 8.72818 7.92676 8.87301L11.9998 12.9463L16.0728 8.87301C16.2113 8.73468 16.3853 8.66385 16.595 8.66051C16.8045 8.65735 16.9818 8.72818 17.1268 8.87301C17.2716 9.01801 17.344 9.19368 17.344 9.40001C17.344 9.60635 17.2716 9.78201 17.1268 9.92701L12.6325 14.4213C12.5388 14.5148 12.4401 14.5808 12.3363 14.6193C12.2324 14.6578 12.1203 14.677 11.9998 14.677Z"
                          fill="#030712"/>
                      </svg>
                    </button>

                    <div class="dropdown">
                      <div class="padding-bottom-300 d-flex flex-column row-gap-300">
                        <a href="{{ parentGroup.url }}"
                           class="nav-button justify-content-start">
                          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                               fill="none">
                            <path
                              d="M9.75 3.9375H5.25C4.9019 3.9375 4.56806 4.07578 4.32192 4.32192C4.07578 4.56806 3.9375 4.9019 3.9375 5.25V9.75C3.9375 9.92236 3.97145 10.093 4.03741 10.2523C4.10337 10.4115 4.20005 10.5562 4.32192 10.6781C4.4438 10.8 4.58849 10.8966 4.74773 10.9626C4.90697 11.0286 5.07764 11.0625 5.25 11.0625H9.75C9.92236 11.0625 10.093 11.0286 10.2523 10.9626C10.4115 10.8966 10.5562 10.8 10.6781 10.6781C10.8 10.5562 10.8966 10.4115 10.9626 10.2523C11.0286 10.093 11.0625 9.92236 11.0625 9.75V5.25C11.0625 5.07764 11.0286 4.90697 10.9626 4.74773C10.8966 4.58849 10.8 4.4438 10.6781 4.32192C10.5562 4.20005 10.4115 4.10337 10.2523 4.03741C10.093 3.97145 9.92236 3.9375 9.75 3.9375ZM9.9375 9.75C9.9375 9.79973 9.91775 9.84742 9.88258 9.88258C9.84742 9.91775 9.79973 9.9375 9.75 9.9375H5.25C5.20027 9.9375 5.15258 9.91775 5.11742 9.88258C5.08225 9.84742 5.0625 9.79973 5.0625 9.75V5.25C5.0625 5.20027 5.08225 5.15258 5.11742 5.11742C5.15258 5.08225 5.20027 5.0625 5.25 5.0625H9.75C9.79973 5.0625 9.84742 5.08225 9.88258 5.11742C9.91775 5.15258 9.9375 5.20027 9.9375 5.25V9.75ZM18.75 3.9375H14.25C13.9019 3.9375 13.5681 4.07578 13.3219 4.32192C13.0758 4.56806 12.9375 4.9019 12.9375 5.25V9.75C12.9375 9.92236 12.9714 10.093 13.0374 10.2523C13.1034 10.4115 13.2 10.5562 13.3219 10.6781C13.4438 10.8 13.5885 10.8966 13.7477 10.9626C13.907 11.0286 14.0776 11.0625 14.25 11.0625H18.75C18.9224 11.0625 19.093 11.0286 19.2523 10.9626C19.4115 10.8966 19.5562 10.8 19.6781 10.6781C19.8 10.5562 19.8966 10.4115 19.9626 10.2523C20.0286 10.093 20.0625 9.92236 20.0625 9.75V5.25C20.0625 4.9019 19.9242 4.56806 19.6781 4.32192C19.4319 4.07578 19.0981 3.9375 18.75 3.9375ZM18.9375 9.75C18.9375 9.79973 18.9177 9.84742 18.8826 9.88258C18.8474 9.91775 18.7997 9.9375 18.75 9.9375H14.25C14.2003 9.9375 14.1526 9.91775 14.1174 9.88258C14.0823 9.84742 14.0625 9.79973 14.0625 9.75V5.25C14.0625 5.20027 14.0823 5.15258 14.1174 5.11742C14.1526 5.08225 14.2003 5.0625 14.25 5.0625H18.75C18.7997 5.0625 18.8474 5.08225 18.8826 5.11742C18.9177 5.15258 18.9375 5.20027 18.9375 5.25V9.75ZM9.75 12.9375H5.25C4.9019 12.9375 4.56806 13.0758 4.32192 13.3219C4.07578 13.5681 3.9375 13.9019 3.9375 14.25V18.75C3.9375 19.0981 4.07578 19.4319 4.32192 19.6781C4.56806 19.9242 4.9019 20.0625 5.25 20.0625H9.75C9.92236 20.0625 10.093 20.0286 10.2523 19.9626C10.4115 19.8966 10.5562 19.8 10.6781 19.6781C10.8 19.5562 10.8966 19.4115 10.9626 19.2523C11.0286 19.093 11.0625 18.9224 11.0625 18.75V14.25C11.0625 14.0776 11.0286 13.907 10.9626 13.7477C10.8966 13.5885 10.8 13.4438 10.6781 13.3219C10.5562 13.2 10.4115 13.1034 10.2523 13.0374C10.093 12.9714 9.92236 12.9375 9.75 12.9375ZM9.9375 18.75C9.9375 18.7997 9.91775 18.8474 9.88258 18.8826C9.84742 18.9177 9.79973 18.9375 9.75 18.9375H5.25C5.20027 18.9375 5.15258 18.9177 5.11742 18.8826C5.08225 18.8474 5.0625 18.7997 5.0625 18.75V14.25C5.0625 14.2003 5.08225 14.1526 5.11742 14.1174C5.15258 14.0823 5.20027 14.0625 5.25 14.0625H9.75C9.79973 14.0625 9.84742 14.0823 9.88258 14.1174C9.91775 14.1526 9.9375 14.2003 9.9375 14.25V18.75ZM18.75 12.9375H14.25C13.9019 12.9375 13.5681 13.0758 13.3219 13.3219C13.0758 13.5681 12.9375 13.9019 12.9375 14.25V18.75C12.9375 19.0981 13.0758 19.4319 13.3219 19.6781C13.5681 19.9242 13.9019 20.0625 14.25 20.0625H18.75C19.0981 20.0625 19.4319 19.9242 19.6781 19.6781C19.9242 19.4319 20.0625 19.0981 20.0625 18.75V14.25C20.0625 13.9019 19.9242 13.5681 19.6781 13.3219C19.4319 13.0758 19.0981 12.9375 18.75 12.9375ZM18.9375 18.75C18.9375 18.7997 18.9177 18.8474 18.8826 18.8826C18.8474 18.9177 18.7997 18.9375 18.75 18.9375H14.25C14.2003 18.9375 14.1526 18.9177 14.1174 18.8826C14.0823 18.8474 14.0625 18.7997 14.0625 18.75V14.25C14.0625 14.2003 14.0823 14.1526 14.1174 14.1174C14.1526 14.0823 14.2003 14.0625 14.25 14.0625H18.75C18.7997 14.0625 18.8474 14.0823 18.8826 14.1174C18.9177 14.1526 18.9375 14.2003 18.9375 14.25V18.75Z"
                              fill="#030712"/>
                          </svg>
                          {{ "Visa all i" | t }} {{ parentGroup.name }}
                        </a>
                        {% include 'mobile_sub_menu' %}
                      </div>
                    </div>
                  </accordion-component>
                </li>
              {% endif %}
            {% endfor %}

            <!--- Pages -->

            {% for page in site.all_pages %}
              {% if page.visible_menu? and page.parent_page == nil %}

                {% if page.children.size > 0 %}
                  <li role="none">
                    <accordion-component>
                      <button type="button" role="menuitem"
                              class="nav-button all-caps justify-content-between w-100 margin-bottom-50">
                        <span>{{ page.title }}</span>
                        <svg class="rotate" xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                             viewBox="0 0 24 24"
                             fill="none">
                          <path
                            d="M11.9998 14.677C11.8793 14.677 11.7671 14.6578 11.6633 14.6193C11.5594 14.5808 11.4607 14.5148 11.367 14.4213L6.87276 9.92701C6.73442 9.78851 6.66359 9.61443 6.66026 9.40476C6.65709 9.19526 6.72792 9.01801 6.87276 8.87301C7.01776 8.72818 7.19342 8.65576 7.39976 8.65576C7.60609 8.65576 7.78176 8.72818 7.92676 8.87301L11.9998 12.9463L16.0728 8.87301C16.2113 8.73468 16.3853 8.66385 16.595 8.66051C16.8045 8.65735 16.9818 8.72818 17.1268 8.87301C17.2716 9.01801 17.344 9.19368 17.344 9.40001C17.344 9.60635 17.2716 9.78201 17.1268 9.92701L12.6325 14.4213C12.5388 14.5148 12.4401 14.5808 12.3363 14.6193C12.2324 14.6578 12.1203 14.677 11.9998 14.677Z"
                            fill="#030712"/>
                        </svg>
                      </button>

                      <div class="dropdown">
                        <div class="padding-bottom-300">
                          <a href="{{ page.url }}"
                             class="nav-button justify-content-start">
                            {{ "Gå till" | t }}
                            <span class="all-caps">{{ page.title }}</span>
                          </a>
                          {% for child in page.children %}
                            <a href="{{ child.url }}"
                               class="nav-button justify-content-start all-caps">{{ child.title }}</a>
                          {% endfor %}
                        </div>
                      </div>
                    </accordion-component>
                  </li>
                {% else %}
                  <li role="none">
                    <a role="menuitem" href="{{ page.url }}"
                       class="nav-button all-caps justify-content-between">{{ page.title }}</a>
                  </li>
                {% endif %}
              {% endif %}
            {% endfor %}
          </accordion-group>
        </ul>
      </nav>
    </div>

    <div class="fixed-bottom padding-y-300 padding-x-150 bg-white">
      <button type="button"
              class="brand-button-secondary w-100"
              data-modal-element="#main-menu"
              data-modal-action="close"
              aria-label="{{ "Stäng menyn" | t }}"
      >{{ "Stäng" | t }}</button>
    </div>
  </modal-component>
</top-element>